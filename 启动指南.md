# 🚀 项目启动指南

## 📋 启动顺序

**重要：先启动后端，再启动前端！**

因为前端需要调用后端 API，所以必须先确保后端服务正常运行。

---

## 🔧 第一步：启动后端

### 1. 检查数据库

确保 MySQL 服务已启动，数据库 `farmproject_db` 已创建。

### 2. 启动后端服务

打开 **第一个** PowerShell 窗口：

```powershell
# 进入后端目录
cd D:\CursorWorkspace\Agriculture-System\backend

# 启动后端服务
.\mvnw.cmd spring-boot:run
```

**等待看到以下提示表示启动成功：**

```
╔════════════════════════════════════════════════════════════╗
║                                                            ║
║     农业系统后端服务启动成功！                                ║
║     Backend Service Started Successfully!                  ║
║                                                            ║
║     服务地址: http://localhost:8080                         ║
║     API 文档: http://localhost:8080/api                     ║
║                                                            ║
╚════════════════════════════════════════════════════════════╝
```

**后端服务地址**: http://localhost:8080

---

## 🎨 第二步：启动前端

### 1. 检查 Node.js

确保已安装 Node.js（版本 16+）

```powershell
node -v
npm -v
```

### 2. 安装依赖（首次启动需要）

打开 **第二个** PowerShell 窗口：

```powershell
# 进入前端目录
cd D:\CursorWorkspace\Agriculture-System\frontend

# 安装依赖（首次启动需要，只需执行一次）
npm install
```

### 3. 启动前端服务

```powershell
# 启动前端开发服务器
npm run serve
```

**等待看到以下提示：**

```
App running at:
- Local:   http://localhost:5173/
- Network: http://192.168.x.x:5173/
```

**前端服务地址**: http://localhost:5173

---

## ✅ 验证启动

### 1. 检查后端

在浏览器访问：http://localhost:8080/api/auth/login

- 如果返回错误信息（如"用户名或密码错误"），说明后端正常
- 如果无法访问，检查后端是否启动成功

### 2. 检查前端

在浏览器访问：http://localhost:5173

- 应该能看到前端页面

---

## 📝 启动命令总结

### 后端启动（第一个窗口）

```powershell
cd D:\CursorWorkspace\Agriculture-System\backend
.\mvnw.cmd spring-boot:run
```

### 前端启动（第二个窗口）

```powershell
cd D:\CursorWorkspace\Agriculture-System\frontend
npm run serve
```

---

## 🔍 常见问题

### Q1: 前端启动失败，提示找不到模块？

**解决**: 先执行 `npm install` 安装依赖

### Q2: 前端无法连接后端？

**检查**:

1. 后端是否已启动（查看第一个窗口）
2. 后端地址是否为 http://localhost:8080
3. 前端代理配置是否正确（已自动更新为 8080）

### Q3: 端口被占用？

**后端端口 8080 被占用**:

- 修改 `backend/src/main/resources/application.properties` 中的 `server.port=8080` 改为其他端口
- 同时更新前端 `vue.config.js` 中的代理地址

**前端端口 5173 被占用**:

- 修改 `frontend/vue.config.js` 中的 `port: 5173` 改为其他端口

### Q4: npm install 很慢？

**解决**: 使用国内镜像

```powershell
npm config set registry https://registry.npmmirror.com
npm install
```

---

## 🎯 快速启动脚本

### Windows PowerShell 快速启动

**启动后端.bat**（在项目根目录创建）:

```batch
@echo off
cd backend
call mvnw.cmd spring-boot:run
pause
```

**启动前端.bat**（在项目根目录创建）:

```batch
@echo off
cd frontend
call npm run serve
pause
```

---

## 📌 重要提示

1. **保持两个窗口都打开**：一个运行后端，一个运行前端
2. **修改代码后**：
   - 后端：需要重启服务
   - 前端：会自动热更新（Hot Reload）
3. **停止服务**：在对应窗口按 `Ctrl + C`

---

**现在可以开始开发了！** 🎉
